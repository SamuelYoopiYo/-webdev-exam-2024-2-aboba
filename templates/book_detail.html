{% extends "base.html" %}

{% block title %}{{ book.title }}{% endblock %}

{% block content %}
<h1>{{ book.title }}</h1>
<p><strong>Автор:</strong> {{ book.author }}</p>
<p><strong>Издатель:</strong> {{ book.publisher }}</p>
<p><strong>Год:</strong> {{ book.year }}</p>
<p><strong>Количество страниц:</strong> {{ book.pages }}</p>
<p><strong>Жанры:</strong> 
    {% for genre in book.genres %}
        {{ genre.name }}{% if not loop.last %}, {% endif %}
    {% endfor %}
</p>
<p><strong>Описание:</strong></p>
<p>{{ book.description }}</p>
<p><strong>Средняя оценка:</strong> {{ book.average_rating }}</p>
<p><strong>Количество рецензий:</strong> {{ book.reviews|length }}</p>

{% if current_user.is_authenticated %}
    <a href="{{ url_for('edit_book', book_id=book.id) }}" class="btn btn-warning" {% if current_user.role.name not in ['Администратор', 'Модератор'] %}style="display:none"{% endif %}>Редактировать</a>
    <form action="{{ url_for('delete_book', book_id=book.id) }}" method="post" style="display:inline">
        <button type="submit" class="btn btn-danger" onclick="return confirm('Вы уверены, что хотите удалить эту книгу?');" {% if current_user.role.name != 'Администратор' %}style="display:none"{% endif %}>Удалить</button>
    </form>
{% endif %}
{% endblock %}
